<div class="container">
    <div class="wrap">
        <div class="pt-[1.875rem] pb-16 large:grid large:grid-cols-12 large:gap-10 large:pt-[2.5rem]{% unless section.settings.remove_margin %} mt-12 large:mt-20{% endunless %}">
            <div class="large:col-span-4">
                {%- if section.settings.heading != blank -%}
                    <h2 class="heading-r">
                        {{- section.settings.heading | escape -}}
                    </h2>
                {%- endif -%}
                {%- if section.settings.description != blank -%}
                    <div class="body-l mt-[0.875rem]">
                        {{- section.settings.description -}}
                    </div>
                {%- endif -%}
            </div>
            <div class="large:col-span-6 large:col-start-6 largeMax:pt-4">
                <h2 class="hidden">
                    {{- 'templates.contact.form.title' | t -}}
                </h2>
                {%- form 'contact', id: 'ContactForm', class: 'isolate relative grid large:grid-cols-6 large:mt-[2.875rem]' -%}
                    {%- if form.posted_successfully? -%}
                        <div class="form-status form-status-list form__message mb-4 large:col-span-4" tabindex="-1" autofocus>{% render 'icon-success' %} {{ 'templates.contact.form.post_success' | t }}</div>
                    {%- elsif form.errors -%}
                        <div class="large:col-span-4">
                            <div class="form__message">
                                {% render 'icon-error' %}
                                <h2 class="form-status caption-large text-body" role="alert" tabindex="-1" autofocus>
                                    {{ 'templates.contact.form.error_heading' | t }}
                                </h2>
                            </div>
                            <ul class="mt-2 mb-4" role="list">
                                <li class="pl-[1.3125rem]">
                                    <a href="#ContactForm-email" class="text-validationError">
                                        {{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}
                                    </a>
                                </li>
                            </ul>
                        </div>
                    {%- endif -%}
                    <div class="field field--label-top large:col-span-4">
                        <label class="field__label" for="ContactForm-name">
                            {{ 'templates.contact.form.first_name' | t }}
                        </label>
                        <input
                            id="ContactForm-name"
                            class="field__input"
                            autocomplete="name"
                            type="text"
                            name="contact[first_name]"
                            value=""
                            placeholder="{{ 'templates.contact.form.first_name' | t }}"
                        >
                    </div>
                    <div class="field field--label-top large:col-span-4">
                        <label class="field__label" for="ContactForm-name">
                            {{ 'templates.contact.form.last_name' | t }}
                        </label>
                        <input
                            id="ContactForm-name"
                            class="field__input"
                            autocomplete="name"
                            type="text"
                            name="contact[last_name]"
                            value=""
                            placeholder="{{ 'templates.contact.form.last_name' | t }}"
                        >
                    </div>
                    <div class="field{% if form.errors contains 'email' %} field--with-error{% endif %} field--label-top placeholder:field--with-error large:col-span-4">
                        <label class="field__label" for="ContactForm-email">{{ 'templates.contact.form.email' | t }} <span aria-hidden="true">*</span></label>
                        <div class="flex items-center gap-1">
                            <input
                                autocomplete="email"
                                type="email"
                                id="ContactForm-email"
                                class="field__input{% if form.errors contains 'email' %} field__input--error{% endif %}"
                                name="contact[email]"
                                spellcheck="false"
                                autocapitalize="off"
                                value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}"
                                aria-required="true"
                                {% if form.errors contains 'email' %}
                                aria-invalid="true"
                                aria-describedby="ContactForm-email-error"
                                {% endif %}
                                placeholder="{{ 'templates.contact.form.email' | t }}"
                                required
                            >
                            {%- if form.errors contains 'email' -%}
                                <span class="w-[0.8125rem] h-[0.8125rem]">
                                    {% render 'icon-error' %}
                                </span>
                            {%  endif  %}
                        </div>
                        {%- if form.errors contains 'email' -%}
                            <small class="contact__field-error" id="ContactForm-email-error">
                                <span class="hidden">{{ 'accessibility.error' | t }}</span>
                                <span class="form__message">{{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}</span>
                            </small>
                        {%- endif -%}
                    </div>
                    <div class="field field--label-top large:col-span-3">
                        <label class="field__label" for="ContactForm-phone">
                            {{ 'templates.contact.form.phone' | t }}
                        </label>
                        <input
                            id="ContactForm-phone"
                            type="tel"
                            class="field__input"
                            autocomplete="tel"
                            name="contact[phone]"
                            pattern="[0-9\-]*"
                            value="{% if form.phone %}{{ form.phone }}{% elsif customer %}{{ customer.phone }}{% endif %}"
                            placeholder="{{ 'templates.contact.form.phone' | t }}"
                        >
                    </div>
                    {%-liquid
                        assign hasContactReason = false
                        for block in section.blocks
                            if block.type == 'contact_reason'
                                assign hasContactReason = true
                            endif
                        endfor
                    -%}
                    {% if hasContactReason %}
                        <div class="field field--label-top large:col-span-4">
                            <label class="field__label" for="ContactForm-reason">
                                {{ 'templates.contact.form.reason' | t }}
                            </label>
                            <select id="ContactForm-reason" class="field__select" name="contact[reason]">
                                <option value="" selected="selected" disabled>
                                    Select one
                                </option>
                                {% for block in section.blocks %}
                                    {% if block.type == 'contact_reason' and block.settings.value %}
                                        <option value="{{ block.settings.value | handleize }}">
                                            {{ block.settings.value }}
                                        </option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                    {% endif %}
                    <div class="field field--label-top large:col-span-6">
                        <label class="form__label field__label" for="ContactForm-body">
                            {{ 'templates.contact.form.message' | t }}
                        </label>
                        <textarea
                            rows="10"
                            id="ContactForm-body"
                            class="text-area field__input"
                            name="contact[message]"
                            placeholder="{{ 'templates.contact.form.message' | t }}"
                        >
                            {{- form.body -}}
                        </textarea>
                    </div>
                    <div class="flex items-center large:col-span-4">
                        <input
                            id="ContactForm-terms"
                            class="field__checkbox"
                            type="checkbox"
                            value=""
                            aria-required="true"
                            required
                        >
                        <label class="ml-4 body-m inline-block" for="ContactForm-terms">
                            I accept the <a href="/pages/terms-and-conditions" class="link">Terms and Conditions</a> and <a href="/pages/privacy-policy" class="link">Privacy Policy</a> <span aria-hidden="true">*</span>
                        </label>
                    </div>
                    <div class="mt-10 large:col-span-4">
                        <button type="submit" class="button min-w-[11.25rem] justify-center">
                            <div class="button__label">
                                <span>
                                    {{ 'templates.contact.form.send' | t }}
                                </span>
                                <span class="absolute top-10 left-0">
                                    {{ 'templates.contact.form.send' | t }}
                                </span>
                            </div>
                            
                        </button>
                    </div>
                {%- endform -%}
            </div>
        </div>
    </div>
</div>

{% schema %}
{
    "name": "t:sections.contact-form.name",
    "tag": "section",
    "class": "section",
    "settings": [
        {
            "type": "text",
            "id": "heading",
            "default": "Send us an enquiry",
            "label": "t:sections.contact-form.settings.heading.label"
        },
        {
            "type": "richtext",
            "id": "description",
            "default": "<p>Lorem ipsum dolor sit amet.</p>",
            "label": "t:sections.contact-form.settings.description.label"
        },
        {
            "type": "checkbox",
            "id": "remove_margin",
            "label": "t:sections.contact-form.settings.remove_margin.label",
            "info": "t:sections.contact-form.settings.remove_margin.info",
            "default": false
        }
    ],
    "blocks": [
        {
            "type": "contact_reason",
            "name": "Contact Reason",
            "settings": [
                {
                    "type": "text",
                    "id": "value",
                    "info": "Select option value for contact form dropdown",
                    "label": "Value"
                }
            ]
        }
    ],
    "presets": [
        {
            "name": "t:sections.contact-form.presets.name"
        }
    ]
}
{% endschema %}
